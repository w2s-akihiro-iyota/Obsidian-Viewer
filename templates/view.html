{% extends "base.html" %}

{% block title %}{{ title }} - Obsidian Viewer{% endblock %}

{% block head %}
<!-- Highlight.js for syntax highlighting -->
<link id="highlight-theme" rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<!-- KaTeX for Math -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" onload="
        renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ],
            throwOnError: false
        });
        document.querySelectorAll('.math.inline').forEach(el => katex.render(el.textContent, el, {throwOnError: false, displayMode: false}));
        document.querySelectorAll('.math.block').forEach(el => katex.render(el.textContent, el, {throwOnError: false, displayMode: true}));
    "></script>
{% endblock %}

{% block container_class %}container-wide{% endblock %}

{% block content %}
<div class="view-header">
    <div class="breadcrumb">
        <a href="/">Home</a> / <span>{{ filename }}</span>
        {% if is_published %}
        <span class="file-status-badge">公開中</span>
        {% endif %}
    </div>

    <div class="page-menu-container">
        <button class="page-menu-btn" id="page-menu-btn" title="メニュー">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="1"></circle>
                <circle cx="12" cy="5" r="1"></circle>
                <circle cx="12" cy="19" r="1"></circle>
            </svg>
        </button>
        <div class="page-menu-dropdown" id="page-menu-dropdown">
            <button class="menu-option" id="copy-url-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                <span>URLをコピー</span>
            </button>
            <button class="menu-option" id="export-pdf-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
                <span>PDFで出力</span>
            </button>
        </div>
    </div>
</div>

<article class="markdown-body">
    {{ content | safe }}
</article>
{% endblock %}